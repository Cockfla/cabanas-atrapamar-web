---
// Componente de logout seguro
---

<div class="fixed top-4 right-4 z-50">
  <form action="/api/auth/signout" method="POST" id="logoutForm">
    <button
      type="submit"
      class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
      title="Cerrar sesión"
    >
      <svg
        class="w-4 h-4 inline mr-2"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
        ></path>
      </svg>
      Cerrar Sesión
    </button>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const logoutForm = document.getElementById("logoutForm") as HTMLFormElement;

    if (logoutForm) {
      logoutForm.addEventListener("submit", function (e) {
        const button = logoutForm.querySelector("button") as HTMLButtonElement;

        if (button) {
          button.disabled = true;
          button.innerHTML = `
            <svg class="w-4 h-4 inline mr-2 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
            Cerrando...
          `;
        }
      });
    }
  });
</script>

